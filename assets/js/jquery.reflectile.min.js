(function(e){e.fn.reflectile=function(t){function r(t,n){num_images=parseInt(e(window).innerWidth()/parseInt(n.width));if(num_images%2){container_left=e(window).innerWidth()%parseInt(n.width)/2}else{container_left=e(window).innerWidth()%parseInt(n.width)/2+400}t.find(".reflectile-container").css("left",container_left+"px");t.find(".reflectile-container").css("width",parseInt(t.css("width"))-container_left+"px")}function i(e,t,n){pos=-(parseInt(t.width)*2);for(var r=1;r<e.width()/parseInt(t.width);r++){pos+=parseInt(t.width)*2;if(e.find(".reflectile-"+r).length==0){e.find(".reflectile-container").append('<span class="reflectile reflectile-'+r+'"></span>');e.find(".reflectile-"+r).css({position:"absolute",width:t.width,height:e.css("height"),"background-image":e.css("background-image"),top:"0px"});e.find(".reflectile-"+r).css(n,pos+"px");s(e.find(".reflectile-"+r))}}}function s(t){e(t).css("-moz-transform","scaleX(-1)");e(t).css("-o-transform","scaleX(-1)");e(t).css("-webkit-transform","scaleX(-1)");e(t).css("transform","scaleX(-1)");e(t).css("filter","FlipH");e(t).css("-ms-filter","FlipH")}var n={width:"500px"};if(t){e.extend(n,t)}return this.each(function(){bg_pos=e(this).css("background-position");bg_pos=bg_pos.split(" ");bg_horizontal_pos=parseInt(bg_pos[0]);if(e(this).find(".reflectile-container").length==0){e(this).append('<div class="reflectile-container">');e(this).find(".reflectile-container").css({position:"absolute",top:"0px",left:"0px",height:e(this).css("height"),overflow:"hidden"})}e(this).find(".reflectile-container").css("width",e(this).css("width"));e(this).children().css("z-index","2");e(this).children().css("position","relative");if(bg_horizontal_pos==0){i(e(this),n,"left");e(window).bind("resize",i(e(this),n,"left"))}else if(bg_horizontal_pos==50){i(e(this),n,"left");r(e(this),n,"left")}else if(bg_horizontal_pos==100){i(e(this),n,"right");e(window).bind("resize",i(e(this),n,"right"))}e(".reflectile").css("z-index","1");e(this).append("</div>")})}})(jQuery)