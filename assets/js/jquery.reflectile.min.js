(function(e){e.fn.reflectile=function(t){function r(t,n){num_images=parseInt(e(window).innerWidth()/parseInt(n.width));if(num_images%2){container_left=e(window).innerWidth()%parseInt(n.width)/2}else{container_left=e(window).innerWidth()%parseInt(n.width)/2+400}t.find(".reflectile-container").css("left",container_left+"px")}function i(e,t,n){left_pos=-(parseInt(t.width)*2)+n;for(var r=1;r<e.width()/parseInt(t.width);r++){left_pos+=parseInt(t.width)*2;if(e.find(".reflectile-"+r).length==0){e.find(".reflectile-container").append('<span class="reflectile reflectile-'+r+'"></span>');e.find(".reflectile-"+r).css({position:"absolute",left:left_pos+"px",width:t.width,height:e.css("height"),"background-image":e.css("background-image"),top:"0px"});o(e.find(".reflectile-"+r))}}}function s(t,n){left_pos=(e(t).width()%(parseInt(n.width)/2)+parseInt(n.width))/2;left_pos=-600+left_pos;for(var r=1;r<t.width()/parseInt(n.width);r++){left_pos+=parseInt(n.width)*2;if(t.find(".reflectile-"+r).length==0){t.find(".reflectile-container").append('<span class="reflectile reflectile-'+r+'"></span>');t.find(".reflectile-"+r).css({position:"absolute",left:left_pos+"px",width:n.width,height:t.css("height"),"background-image":t.css("background-image"),top:"0px"});o(t.find(".reflectile-"+r))}}}function o(t){e(t).css("-moz-transform","scaleX(-1)");e(t).css("-o-transform","scaleX(-1)");e(t).css("-webkit-transform","scaleX(-1)");e(t).css("transform","scaleX(-1)");e(t).css("filter","FlipH");e(t).css("-ms-filter","FlipH")}var n={width:"500px"};if(t){e.extend(n,t)}return this.each(function(){bg_pos=e(this).css("background-position");bg_pos=bg_pos.split(" ");bg_horizontal_pos=parseInt(bg_pos[0]);if(e(this).find(".reflectile-container").length==0){e(this).append('<div class="reflectile-container">');e(this).find(".reflectile-container").css({position:"absolute",top:"0px",left:"0px",height:e(this).css("height"),overflow:"hidden"})}e(this).find(".reflectile-container").css("width",e(this).css("width"));e(this).children().css("z-index","2");e(this).children().css("position","relative");if(bg_horizontal_pos==0){i(e(this),n,0);e(window).bind("resize",i(e(this),n,0))}else if(bg_horizontal_pos==50){i(e(this),n,0);r(e(this),n)}e(".reflectile").css("z-index","1");e(this).append("</div>")})}})(jQuery)